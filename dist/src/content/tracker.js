(function(){"use strict";class c{constructor(){this.position={x:0,y:0},this.velocity={vx:0,vy:0},this.acceleration={ax:0,ay:0},this.direction=0,this.lastPosition={x:0,y:0},this.lastVelocity={vx:0,vy:0},this.lastTimestamp=performance.now(),this.listeners=new Set,this.isTracking=!1,this._boundMouseMove=this._onMouseMove.bind(this)}start(){this.isTracking||(this.isTracking=!0,document.addEventListener("mousemove",this._boundMouseMove,{passive:!0}))}stop(){this.isTracking=!1,document.removeEventListener("mousemove",this._boundMouseMove)}subscribe(t){return this.listeners.add(t),()=>this.listeners.delete(t)}_onMouseMove(t){const s=performance.now(),i=(s-this.lastTimestamp)/1e3;if(i<16/1e3)return;this.position.x=t.clientX,this.position.y=t.clientY,this.velocity.vx=(this.position.x-this.lastPosition.x)/i,this.velocity.vy=(this.position.y-this.lastPosition.y)/i,this.acceleration.ax=(this.velocity.vx-this.lastVelocity.vx)/i,this.acceleration.ay=(this.velocity.vy-this.lastVelocity.vy)/i,this.direction=Math.atan2(this.velocity.vy,this.velocity.vx),this.lastPosition={...this.position},this.lastVelocity={...this.velocity},this.lastTimestamp=s;const e=this.getData();this.listeners.forEach(o=>o(e))}getData(){return{position:{...this.position},velocity:{...this.velocity},acceleration:{...this.acceleration},direction:this.direction,speed:Math.sqrt(this.velocity.vx**2+this.velocity.vy**2),isDecelerating:this._isDecelerating(),timestamp:performance.now()}}_isDecelerating(){const t=Math.sqrt(this.velocity.vx**2+this.velocity.vy**2),s=Math.sqrt(this.lastVelocity.vx**2+this.lastVelocity.vy**2);return t<s*.8}getIntentionScore(t,s){const i=t-this.position.x,e=s-this.position.y,o=Math.sqrt(i*i+e*e);if(o===0)return 1;const h=i/o,l=e/o,a=Math.sqrt(this.velocity.vx**2+this.velocity.vy**2);if(a===0)return 0;const v=this.velocity.vx/a,y=this.velocity.vy/a;return h*v+l*y}}window.instantNavTracker=new c,window.instantNavTracker.start(),console.log("[InstantNav] Cursor Tracker initialized");function r(){window.addEventListener("load",()=>{setTimeout(()=>{try{const n=performance.getEntriesByType("navigation")[0],t=n?n.loadEventEnd:0;t>0&&chrome.runtime.sendMessage({type:"NAVIGATION_COMPLETE",url:window.location.href,loadTime:Math.round(t)})}catch{}},0)})}r()})();
